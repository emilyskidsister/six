import React from "react";
import PieMenu, { Slice } from "react-pie-menu";

import { css, ThemeProvider } from "styled-components";

const theme = {
  slice: {
    container: css`
      background: ${({ centerRadius }: any) =>
        `radial-gradient(transparent ${centerRadius}, #f9bc60cc ${centerRadius})`};
      color: #abd1c6;
      cursor: pointer;
      path {
        fill: #001e1d;
      }
      :hover {
        background: ${({ centerRadius }: any) =>
          `radial-gradient(transparent ${centerRadius}, #004643 ${centerRadius})`};
        color: #001e1d;
        path {
          fill: #fffffe;
        }
      }
    `,
  },
};

export default function NoteInsertMenu({
  pos,
  onClose,
  onAddNote,
}: {
  pos: [number, number];
  onClose: () => void;
  onAddNote: (duration: [number, number]) => void;
}) {
  return (
    <ThemeProvider theme={theme}>
      <div
        style={{
          position: "fixed",
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
          zIndex: 100,
          userSelect: "none",
        }}
        onMouseUp={onClose}
      >
        <PieMenu
          centerX={`${pos[0]}px`}
          centerY={`${pos[1]}px`}
          centerRadius="20px"
          radius="100px"
        >
          <Slice onSelect={() => onAddNote([1, 1])}>
            <svg viewBox="0 0 9 9" height="9mm" width="9mm">
              <g transform="translate(0,-288)">
                <path d="m 4.547625,291.34114 c -0.557257,0.004 -1.1492418,0.0967 -1.6050579,0.44022 -0.2610986,0.19168 -0.4353266,0.51961 -0.3747731,0.84754 0.045921,0.39576 0.3649445,0.69971 0.7223673,0.83886 0.5504001,0.21823 1.1599313,0.21466 1.740715,0.16088 0.4337156,-0.0529 0.9055312,-0.16415 1.2006076,-0.51275 0.189232,-0.23665 0.2686635,-0.57726 0.1643176,-0.86622 -0.1615777,-0.36778 -0.5336679,-0.5818 -0.8913432,-0.72463 -0.3047206,-0.11639 -0.6302164,-0.18274 -0.9568333,-0.1839 z m -0.9630833,0.58208 c 0.067528,-0.25626 0.3502844,-0.35697 0.5893332,-0.36573 0.35966,-0.0475 0.715331,0.12989 0.9412813,0.4041 0.2439067,0.29084 0.41105,0.70093 0.2914215,1.07884 -0.063703,0.21078 -0.2584424,0.35617 -0.4719996,0.38834 -0.4116086,0.0879 -0.8218121,-0.14994 -1.0683489,-0.46763 -0.2190975,-0.28036 -0.3706859,-0.65169 -0.2921675,-1.01014 z" />
              </g>
            </svg>
          </Slice>
          <Slice onSelect={() => onAddNote([1, 2])}>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 4.0078751,296.818 c 0.6873953,0.0237 1.4092703,-0.30552 1.7297919,-0.93528 0.1887615,-0.31458 0.2229312,-0.68264 0.206958,-1.0406 0,-2.22004 0,-4.44008 0,-6.66012 -0.092473,0.0225 -0.2953578,-0.0653 -0.254,0.0911 0,2.10748 0,4.21496 0,6.32244 -0.4144043,-0.33818 -1.0101977,-0.25609 -1.4844659,-0.10739 -0.6753591,0.23078 -1.2034515,0.92961 -1.1401364,1.6549 0.056046,0.45024 0.525375,0.69016 0.9418524,0.67499 z m 0.22225,-1.67217 c 0.3454621,-0.1747 0.7122522,-0.42555 1.1163762,-0.36578 0.3738766,0.11298 0.3459106,0.60139 0.041183,0.78591 -0.4271187,0.38774 -0.934737,0.71245 -1.4957993,0.86142 -0.3121571,0.0831 -0.6804989,-0.2644 -0.5071034,-0.57461 0.1874334,-0.32432 0.5364213,-0.51656 0.8453438,-0.70694 z" />
              </g>
            </svg>
          </Slice>
          <Slice onSelect={() => onAddNote([1, 4])}>
            <svg viewBox="0 0 9 9" height="9mm" width="9mm">
              <g transform="translate(0,-288)">
                <path d="M 5.6535834,294.63253 C 5.48425,294.48437 5.2514167,294.41028 4.97625,294.41028 c -1.0477499,0 -1.8838332,0.77259 -1.8838332,1.59809 0,0.49741 0.4021666,0.79375 0.9207499,0.79375 0.8466667,0 1.8944166,-0.79375 1.8944166,-1.59809 v -7.00616 H 5.6535834 Z" />
              </g>
            </svg>
          </Slice>
          <Slice onSelect={() => onAddNote([1, 8])}>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 5.9234582,290.58443 c -0.4475053,-0.67457 -0.8075308,-1.42209 -0.9342685,-2.2274 -0.1103392,-0.24774 -0.4107728,-0.12583 -0.3251481,0.11196 0,2.04923 0,4.09846 0,6.14769 -0.4218281,-0.34057 -1.0297863,-0.24089 -1.4972513,-0.0552 -0.6183303,0.25623 -1.1594473,0.89451 -1.0456218,1.59733 0.096826,0.48683 0.6619133,0.68344 1.1039804,0.60285 0.6834343,-0.11121 1.3457529,-0.55225 1.6209171,-1.20095 0.122278,-0.3727 0.054213,-0.77092 0.071976,-1.15686 0,-1.32254 0,-2.64509 0,-3.96763 0.6063847,0.44005 1.0167561,1.09764 1.3538708,1.75466 0.2778912,0.61164 0.2926346,1.31429 0.2098166,1.97067 0.00612,0.29652 -0.4041204,0.83747 0.030923,0.95598 0.2970929,-0.18375 0.2249542,-0.6317 0.3237419,-0.93521 0.239346,-1.27064 -0.2418153,-2.53802 -0.9129359,-3.59793 z" />
              </g>
            </svg>
          </Slice>
          <Slice onSelect={() => onAddNote([1, 16])}>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 6.7807082,292.83868 c 0.015243,-0.30681 0.1821199,-0.60211 0.1939468,-0.91885 0.076336,-0.57158 -0.097778,-1.17409 -0.5002023,-1.59348 -0.3096485,-0.38411 -0.6737056,-0.71537 -1.0419364,-1.04102 -0.272448,-0.25905 -0.4118132,-0.62226 -0.4697023,-0.98705 -0.098025,-0.11241 -0.378955,-0.12883 -0.2987724,0.0839 0,2.07815 0,4.15631 0,6.23447 -0.4218281,-0.34057 -1.0297863,-0.24089 -1.4972513,-0.0552 -0.6183303,0.25623 -1.1594473,0.89451 -1.0456218,1.59733 0.096826,0.48683 0.6619133,0.68344 1.1039804,0.60285 0.6834606,-0.11121 1.3457058,-0.55224 1.6209171,-1.20095 0.1218239,-0.36783 0.054472,-0.7611 0.071976,-1.14214 0,-0.9394 0,-1.87879 0,-2.81818 0.5617341,0.003 1.0330302,0.39201 1.3013779,0.86122 0.4356685,0.64845 0.5481838,1.46415 0.4145121,2.22382 -0.1482985,0.2558 0.2036996,0.66682 0.3385375,0.25536 0.053892,-0.51005 0.090335,-1.03409 5.064e-4,-1.54188 -0.042431,-0.19331 -0.108667,-0.38103 -0.1922673,-0.56027 z m -0.127,-0.9525 c 0.017846,0.36964 -0.297147,0.27342 -0.3820542,0.009 -0.2941292,-0.41942 -0.7140723,-0.72735 -1.0165403,-1.13806 -0.092926,-0.17632 -0.4446672,-0.66489 -0.072489,-0.68035 0.5855388,0.0248 1.0136159,0.51708 1.3115065,0.97381 0.1422533,0.25128 0.1956518,0.55032 0.1595768,0.83594 z" />
              </g>
            </svg>
          </Slice>
          <Slice>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <g transform="matrix(0.50127243,0,0,0.50127243,2.2442741,145.87781)">
                  <path d="m 6.9115627,292.5 c 0,-1.32636 -1.0852033,-2.41156 -2.4115628,-2.41156 -1.3263596,0 -2.4115628,1.0852 -2.4115628,2.41156 0,1.32636 1.0852032,2.41157 2.4115628,2.41157 1.3263595,0 2.4115628,-1.08521 2.4115628,-2.41157 z" />
                </g>
              </g>
            </svg>
          </Slice>
          <Slice>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 3.0167191,295.16893 c 0.019517,0 0.039034,-0.0195 0.058551,-0.0195 0,0 0.1756517,-0.0683 0.2927528,-0.10734 0.00976,-0.0195 0.019517,-0.0195 0.029275,-0.0195 0.097584,0 0.1561348,0.14638 0.1561348,0.20493 v 1.56135 c 0,0.0781 0.078067,0.13661 0.1658932,0.13661 0.1268596,0 0.2146854,-0.0585 0.2146854,-0.13661 v -1.76628 c 0,-0.16589 0.068309,-0.25372 0.1268596,-0.27324 l 0.7709157,-0.32202 c 0.019517,0 0.039034,-0.01 0.05855,-0.01 0.097584,0 0.1561349,0.15613 0.1561349,0.22444 v 1.59063 c 0,0.0781 0.078067,0.13661 0.1658932,0.13661 0.1463764,0 0.2146854,-0.0586 0.2146854,-0.13661 v -1.80531 c 0,-0.0976 0.058551,-0.25372 0.1463764,-0.29276 0.087826,-0.039 0.3513034,-0.13661 0.3513034,-0.13661 0.087826,-0.039 0.1561348,-0.13662 0.1561348,-0.21469 v -0.89777 c 0,-0.0683 -0.039034,-0.10735 -0.087826,-0.10735 -0.029275,0 -0.039034,0 -0.068309,0.0195 l -0.3317865,0.12686 c -0.068309,0 -0.1658933,-0.0781 -0.1658933,-0.2342 v -1.18077 c 0,-0.0878 0.068309,-0.33179 0.1658933,-0.36106 l 0.3317865,-0.12686 c 0.087826,-0.039 0.1561348,-0.14638 0.1561348,-0.22445 v -0.89777 c 0,-0.0586 -0.039034,-0.0976 -0.087826,-0.0976 -0.029275,0 -0.039034,0 -0.068309,0.01 0,0 -0.2537191,0.0976 -0.3122697,0.1171 -0.087826,0 -0.1854101,-0.0683 -0.1854101,-0.16589 v -1.55159 c 0,-0.0781 -0.068309,-0.13662 -0.1756517,-0.13662 -0.1268595,0 -0.2049269,0.0586 -0.2049269,0.13662 v 1.64917 c -0.00976,0.12686 -0.048792,0.29276 -0.1561349,0.37082 -0.1561348,0.0878 -0.5855056,0.26348 -0.8001909,0.31227 -0.1171012,0 -0.1561349,-0.14637 -0.1561349,-0.25372 v -1.52231 c 0,-0.0683 -0.087826,-0.13662 -0.1756517,-0.13662 -0.1268595,0 -0.2049269,0.0683 -0.2049269,0.13662 v 1.71748 c 0,0.17565 -0.078067,0.30251 -0.1561348,0.34155 -0.068309,0.039 -0.3220281,0.13662 -0.3220281,0.13662 -0.087826,0.0293 -0.1561348,0.12685 -0.1561348,0.20492 v 0.89778 c 0,0.0781 0.039034,0.1171 0.097584,0.1171 0.068309,0 0.273236,-0.10734 0.3317865,-0.13662 0.019517,0 0.029275,-0.01 0.039034,-0.01 0.087826,0 0.1658933,0.12686 0.1658933,0.22445 v 1.25883 c 0,0.13662 -0.058551,0.25372 -0.136618,0.29276 -0.078067,0.0195 -0.3415449,0.13661 -0.3415449,0.13661 -0.087826,0.0195 -0.1561348,0.12686 -0.1561348,0.20493 v 0.89778 c 0,0.0781 0.039034,0.1171 0.097584,0.1171 z m 0.9172921,-3.21053 c 0.029275,-0.21468 0.6050225,-0.48792 0.9270506,-0.48792 0.087826,0 0.1658932,0.0293 0.1854101,0.0781 0.029275,0.0683 0.05855,0.38058 0.05855,0.72212 0,0.34155 -0.029275,0.70261 -0.05855,0.80995 -0.068309,0.25372 -0.663573,0.50744 -0.9563258,0.50744 -0.078068,0 -0.1463764,-0.0195 -0.1561349,-0.0585 -0.029275,-0.0488 -0.039034,-0.33179 -0.039034,-0.6343 0,-0.39033 0.00976,-0.83922 0.039034,-0.93681 z" />
              </g>
            </svg>
          </Slice>
          <Slice>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 3.5339158,295.00305 c 0.00976,0 0.087826,-0.01 0.097584,-0.0195 0.1756517,-0.0781 0.8880169,-0.38058 1.2490787,-0.38058 0.1268595,0 0.2146853,0.039 0.2146853,0.13662 v 1.89314 c 0,0.0878 0.068309,0.15613 0.1561349,0.15613 h 0.1658932 c 0.078067,0 0.1463764,-0.0683 0.1463764,-0.15613 v -6.37226 c 0,-0.0585 -0.048792,-0.0976 -0.097584,-0.0976 -0.00976,0 -0.039034,0 -0.048792,0.01 l -0.1951685,0.0683 c -0.019517,0 -0.039034,0.01 -0.048792,0.01 0,0 -0.8099495,0.29276 -1.141736,0.29276 -0.078067,0 -0.1268595,-0.01 -0.1268595,-0.0683 v -2.11758 c 0,-0.0878 -0.078067,-0.14638 -0.1463764,-0.14638 H 3.5924663 c -0.087826,0 -0.1561348,0.0585 -0.1561348,0.14638 v 6.53815 c 0,0.0781 0.039034,0.10734 0.097584,0.10734 z m 0.3708202,-2.96656 c 0,-0.17566 0.7709157,-0.50744 1.0831854,-0.50744 0.068309,0 0.1073426,0.0195 0.1073426,0.0683 v 1.30763 c 0,0.22444 -0.7221235,0.51719 -1.0343932,0.51719 -0.087826,0 -0.1561348,-0.0293 -0.1561348,-0.0781 z" />
              </g>
            </svg>
          </Slice>
          <Slice>
            <svg width="9mm" height="9mm" viewBox="0 0 9 9">
              <g transform="translate(0,-288)">
                <path d="m 3.5387951,295.61293 c 0,0 -0.048792,-0.87826 -0.048792,-1.46377 0,-0.2342 0.019517,-0.40985 0.029275,-0.4684 0.058551,-0.17565 0.4391292,-0.49768 0.6440562,-0.61478 0.136618,-0.0683 0.2634775,-0.0976 0.3805786,-0.0976 0.4391292,0 0.6050225,0.47817 0.6050225,0.84899 0,0.79043 -0.6733315,1.58086 -1.3076292,1.9712 -0.058551,0.0293 -0.097584,0.0488 -0.1463764,0.0488 -0.1268595,0 -0.1561348,-0.14637 -0.1561348,-0.22444 z m -0.5171966,1.30763 c 0.048792,0.0585 0.087826,0.0781 0.1366179,0.0781 0.039034,0 0.087826,-0.0293 0.087826,-0.0293 0.4391292,-0.25372 0.7904325,-0.65382 1.1514943,-0.89778 1.3076292,-0.90753 1.7565168,-1.8053 1.7565168,-2.47864 0,-0.82946 -0.6440561,-1.35642 -1.3173876,-1.40521 -0.097584,0 -0.2049269,0.0195 -0.3025112,0.0488 -0.1658933,0.039 -0.3415449,0.0976 -0.4976798,0.20493 -0.087826,0.0683 -0.2537191,0.20493 -0.322028,0.20493 -0.029275,0 -0.048792,0 -0.078067,-0.0195 -0.097584,-0.039 -0.1561348,-0.14638 -0.1561348,-0.24396 0.00976,-0.32203 0.097584,-3.83506 0.097584,-4.12782 0,-0.16589 -0.1268596,-0.25371 -0.273236,-0.25371 -0.2049269,0 -0.4391292,0.14637 -0.458646,0.40985 0,0 0.05855,8.36297 0.1756517,8.50935 z" />
              </g>
            </svg>
          </Slice>
        </PieMenu>
      </div>
    </ThemeProvider>
  );
}
